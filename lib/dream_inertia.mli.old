(** Inertia.js Backend Integration for Dream *)

(** The type for page properties. A JSON object. *)
type props = Yojson.Safe.t

type root_view = string -> string

(** Inertia configuration *)
type t = { root_view : root_view }

(** Creates the default Inertia configuration.
    - Basic HTML root view. *)
val init : root_view -> t

(** Renders an Inertia response.
    Call this from your Dream route handler.
    It prepares the Inertia page data, which the middleware will then
    format as either JSON or embed in the HTML shell.

    @param component The name of the frontend component to render.
    @param props The properties specific to this page/component.
    @param request The Dream request object. *)
val render
  :  t
  -> Dream.request
  -> component:string
  -> props:props
  -> Dream.response Lwt.t

(** Helper to check if a request is an Inertia request. *)
val is_inertia_request : Dream.request -> bool
